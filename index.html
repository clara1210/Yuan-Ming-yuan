<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>åœ†æ˜å›­æ„ä»¶3Då±•ç¤º</title>
    
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family: Arial, sans-serif;background:#000;color:#fff;overflow-x:hidden;}
button{cursor:pointer;}

#techCanvas{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
z-index:-1;
}

#hudPanel{
position:fixed;
left:20px;
bottom:20px;
background:rgba(0,255,255,0.1);
border:1px solid #00ffff;
padding:15px;
border-radius:10px;
font-size:13px;
backdrop-filter:blur(5px);
}

#musicBtn,#lightBtn{
position:fixed;
right:20px;
padding:8px 12px;
border:none;
border-radius:6px;
background:#00ffff;
color:#000;
z-index:9999;
font-weight:bold;
}
#musicBtn{bottom:20px;}
#lightBtn{bottom:60px;}

#scanLine{
position:fixed;
top:0;
left:0;
width:100%;
height:4px;
background:linear-gradient(to right,transparent,#00ffff,transparent);
animation:scan 3s linear infinite;
}
@keyframes scan{
0%{top:0;}
100%{top:100%;}
}

#langBtn{
position:fixed;
top:20px;
right:20px;
padding:8px 14px;
border:none;
border-radius:6px;
background:#333;
color:#fff;
font-size:14px;
z-index:9999;
}

#selectPage{
min-height:100vh;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
gap:30px;
}

.select-btn{
width:200px;
height:200px;
border:none;
border-radius:12px;
background-size:cover;
background-position:center;
}

#viewerPage{
display:none;
min-height:100vh;
flex-direction:column;
align-items:center;
padding:20px;
position:relative;
}

#backBtn{
position:fixed;
top:calc(20px + env(safe-area-inset-top));
left:20px;
padding:10px 20px;
font-size:16px;
border:none;
border-radius:6px;
background:#b8860b;
color:#fff;
font-weight:bold;
z-index:9999;
}

.model-container{
width:100%;
max-width:900px;
height:75vh;
border-radius:15px;
overflow:hidden;
position:relative;
margin-bottom:20px;
box-shadow:0 20px 40px rgba(0,0,0,0.2);
}

#modelCanvas{width:100%;height:100%;display:block;}


.introduction{
width:100%;
max-width:900px;
padding:30px;
text-align:center;
font-size:16px;
font-weight:bold;
background:rgba(255,255,255,0.95);
border-radius:15px;
line-height:1.7;
white-space:pre-line;
opacity:0;
transition:opacity 0.6s ease;
color:#333
}
.introduction.show{opacity:1;}

.controls{
margin-top:20px;
display:flex;
gap:10px;
justify-content:center;
flex-wrap:wrap;
}

.control-btn,.part-btn{
padding:8px 16px;
border-radius:4px;
cursor:pointer;
}

.control-btn{border:none;background:#ffffff;}
.part-btn{background:#b8860b;border:none;color:#fff;font-weight:bold;}

/* å³ä¸Šè§’ä¿®å¤æŒ‰é’®å®¹å™¨ */
.model-top-buttons{
position:absolute;
top:15px;
right:15px;
display:flex;
gap:10px;
z-index:20;
}

.model-top-buttons button{
padding:8px 14px;
border:none;
border-radius:6px;
background:#b8860b;
color:#fff;
font-weight:bold;
cursor:pointer;
transition: all 0.3s ease;
box-shadow: 0 0 8px rgba(0,255,255,0.4);
}

/* æ‚¬æµ®å‘å…‰æ•ˆæœ */
.model-top-buttons button:hover{
box-shadow: 0 0 20px #00ffff, 0 0 40px #00ffff, 0 0 60px #00ffff;
transform: translateY(-2px);
}

/* ç‚¹å‡»é«˜äº®æ•ˆæœ */
.model-top-buttons button.active{
background:#00ffff;
color:#000;
box-shadow: 0 0 30px #00ffff, 0 0 50px #00ffff, 0 0 70px #00ffff;
}
</style>
</head>
<body>

<canvas id="techCanvas"></canvas>
<div id="scanLine"></div>

<audio id="bgm" loop>
<source src="https://cdn.pixabay.com/audio/2022/03/15/audio_7c1b5b1c8b.mp3" type="audio/mpeg">
</audio>

<button id="musicBtn">ğŸµ</button>
<button id="lightBtn">ğŸ’¡</button>
<button id="langBtn" onclick="toggleLanguage()">ä¸­æ–‡</button>

<div id="selectPage">
<button class="select-btn" id="horseBtn" onclick="startViewer('horse')" style="background-image:url('horsepicture.jpg')"></button>
<button class="select-btn" id="tigerBtn" onclick="startViewer('tiger')" style="background-image:url('tigerpicture.jpg')"></button>
</div>

<div id="viewerPage">
<button id="backBtn" onclick="returnToSelect()">è¿”å›é€‰æ‹©</button>

<div class="model-container">
<div id="loading">åŠ è½½ä¸­...</div>
<canvas id="modelCanvas"></canvas>

<!-- å³ä¸Šè§’ä¿®å¤æŒ‰é’® -->
<div class="model-top-buttons">
<button id="oldBtn">ä¿®å¤å‰</button>
<button id="newBtn">ä¿®å¤å</button>
</div>
</div>

<div class="introduction" id="introText"></div>

<div class="controls">
<button class="control-btn" id="resetBtn" onclick="resetCamera()">é‡ç½®è§†è§’</button>
<button class="control-btn" id="zoomInBtn" onclick="zoomIn()">æ”¾å¤§</button>
<button class="control-btn" id="zoomOutBtn" onclick="zoomOut()">ç¼©å°</button>
</div>

<div class="part-buttons" id="partButtons"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>

<script>
let currentLang='zh';
let scene, camera, renderer, controls, model;
let autoRotate=true;
let currentModel='';
let modelScale=1;
const originalMaterials = new Map();
let speakOn=false;

// è·å–å³ä¸ŠæŒ‰é’®
const oldBtn=document.getElementById('oldBtn');
const newBtn=document.getElementById('newBtn');

oldBtn.onclick = function(){loadOldModel(); oldBtn.classList.add('active'); newBtn.classList.remove('active');}
newBtn.onclick = function(){loadNewModel(); newBtn.classList.add('active'); oldBtn.classList.remove('active');}

// è¯­è¨€åˆ‡æ¢
function toggleLanguage(){
currentLang=currentLang==='zh'?'en':'zh';
document.getElementById('langBtn').innerText=currentLang==='zh'?'ä¸­æ–‡':'English';
updateStaticText();
updateRestoreButtons();
if(currentModel) setupPartButtons();
showIntroduction();
}

// æ›´æ–°é™æ€æ–‡å­—
function updateStaticText(){
document.getElementById('backBtn').innerText=currentLang==='zh'?'è¿”å›é€‰æ‹©':'Back';
document.getElementById('resetBtn').innerText=currentLang==='zh'?'é‡ç½®è§†è§’':'Reset View';
document.getElementById('zoomInBtn').innerText=currentLang==='zh'?'æ”¾å¤§':'Zoom In';
document.getElementById('zoomOutBtn').innerText=currentLang==='zh'?'ç¼©å°':'Zoom Out';
document.getElementById('loading').innerText=currentLang==='zh'?'åŠ è½½ä¸­...':'Loading...';
}

function updateRestoreButtons(){
if(currentLang==='zh'){
oldBtn.innerText=currentModel==='horse'?'ä¿®å¤å‰çš„é©¬é¦–':'ä¿®å¤å‰çš„è™é¦–';
newBtn.innerText=currentModel==='horse'?'ä¿®å¤åçš„é©¬é¦–':'ä¿®å¤åçš„è™é¦–';
}else{
oldBtn.innerText="Before Restoration";
newBtn.innerText="After Restoration";
}
}

// é¡µé¢åˆ‡æ¢
function startViewer(type){
currentModel = type;
document.getElementById('selectPage').style.display='none';
document.getElementById('viewerPage').style.display='flex';
setupPartButtons();
init();
animate();
showIntroduction();
}

function returnToSelect(){
document.getElementById('viewerPage').style.display='none';
document.getElementById('selectPage').style.display='flex';
if(model) scene.remove(model);
model=null;
}

// è®¾ç½®é›¶ä»¶æŒ‰é’®
function setupPartButtons(){
const c=document.getElementById('partButtons');
c.innerHTML='';
if(currentModel==='horse'){
c.innerHTML=currentLang==='zh'?`
<button class="part-btn" onclick="showIntroduction('mane');highlightPart('mane')">é¬“æ¯›</button>
<button class="part-btn" onclick="showIntroduction('ear');highlightPart('ear')">è€³æœµ</button>
<button class="part-btn" onclick="showIntroduction('material');highlightPart('material')">æè´¨</button>
`:
`
<button class="part-btn" onclick="showIntroduction('mane');highlightPart('mane')">Mane</button>
<button class="part-btn" onclick="showIntroduction('ear');highlightPart('ear')">Ear</button>
<button class="part-btn" onclick="showIntroduction('material');highlightPart('material')">Material</button>
`;
modelScale=2;
}
else if(currentModel==='tiger'){
c.innerHTML=currentLang==='zh'?`
<button class="part-btn" onclick="showIntroduction('forehead');highlightPart('forehead')">å‰é¢</button>
<button class="part-btn" onclick="showIntroduction('eyes');highlightPart('eyes')">çœ¼éƒ¨ç¥æ€</button>
<button class="part-btn" onclick="showIntroduction('nose');highlightPart('nose')">é¼»éƒ¨ä¸é¢éƒ¨è‚Œè‚‰</button>
`:
`
<button class="part-btn" onclick="showIntroduction('forehead');highlightPart('forehead')">Forehead</button>
<button class="part-btn" onclick="showIntroduction('eyes');highlightPart('eyes')">Eyes</button>
<button class="part-btn" onclick="showIntroduction('nose');highlightPart('nose')">Nose & Muscles</button>
`;
modelScale=2;
}
}

// åˆå§‹åŒ– Three.js åœºæ™¯
function init(){
scene = new THREE.Scene();
const bgTexture = new THREE.TextureLoader().load('back.jpg');
scene.background = bgTexture;

camera = new THREE.PerspectiveCamera(60,1,0.1,1000);
camera.position.set(0,1,6);

const container = document.querySelector('.model-container');
renderer = new THREE.WebGLRenderer({canvas: document.getElementById('modelCanvas'), antialias:true, alpha:true});
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(container.clientWidth, container.clientHeight);
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;

// ç¯å…‰
scene.add(new THREE.AmbientLight(0xffffff,0.4));
let spot = new THREE.SpotLight(0xffffff,0.8); spot.position.set(5,10,5); spot.castShadow=true; scene.add(spot);
scene.add(new THREE.DirectionalLight(0xffffff,1.2)).position.set(0,3,6);
scene.add(new THREE.DirectionalLight(0xffffff,0.6)).position.set(-5,3,2);
scene.add(new THREE.DirectionalLight(0xffffff,0.4)).position.set(0,3,-6);

// åœ°é¢
const ground = new THREE.Mesh(new THREE.PlaneGeometry(20,20), new THREE.ShadowMaterial({opacity:0.25}));
ground.rotation.x=-Math.PI/2; ground.position.y=-1.5; ground.receiveShadow=true; scene.add(ground);

// æ§åˆ¶å™¨
controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping=true; controls.enablePan=false;
controls.addEventListener('start',()=>autoRotate=false);
controls.addEventListener('end',()=>autoRotate=true);

// åŠ è½½æ¨¡å‹
if(currentModel==='horse') loadModel('horse model.glb');
else if(currentModel==='tiger') loadModel('tiger model.glb');

window.addEventListener('resize', onWindowResize);
}

function loadModel(url){
const loader = new THREE.GLTFLoader();
document.getElementById('loading').style.display='block';
loader.load(url,function(gltf){
if(model) scene.remove(model);
model=gltf.scene;
model.traverse(obj=>{if(obj.isMesh){ obj.castShadow=true; obj.receiveShadow=false;}});
const box = new THREE.Box3().setFromObject(model);
const size = box.getSize(new THREE.Vector3()).length();
const scale = modelScale/size;
model.scale.set(0.01,0.01,0.01);
scene.add(model); document.getElementById('loading').style.display='none';
let currentScale=0.01;
(function scaleUp(){if(currentScale<scale){currentScale+=0.02; model.scale.set(currentScale,currentScale,currentScale); requestAnimationFrame(scaleUp);}else model.scale.set(scale,scale,scale);})();
model.position.sub(box.getCenter(new THREE.Vector3()));
});
}

function loadOldModel(){if(currentModel==='horse') loadModel('horse model.glb'); else if(currentModel==='tiger') loadModel('tiger model.glb'); showIntroduction();}
function loadNewModel(){if(currentModel==='horse') loadModel('horse.glb'); else if(currentModel==='tiger') loadModel('tiger.glb'); showIntroduction();}

function animate(){requestAnimationFrame(animate); if(model && autoRotate) model.rotation.y+=0.003; controls.update(); renderer.render(scene,camera);}
function onWindowResize(){const container=document.querySelector('.model-container'); camera.aspect=container.clientWidth/container.clientHeight; camera.updateProjectionMatrix(); renderer.setSize(container.clientWidth, container.clientHeight);}
function resetCamera(){camera.position.set(0,1,6); controls.target.set(0,0,0); controls.update();}
function zoomIn(){camera.position.z*=0.85;}
function zoomOut(){camera.position.z*=1.15;}

    
// æ–‡å­—ä»‹ç»
function showIntroduction(part){
const intro = document.getElementById('introText');
intro.classList.remove('show');
let text='';
if(currentModel==='horse'){
text=`å®ƒä¸åªæ˜¯ä¸€ä»¶æ–‡ç‰©ï¼Œæ›´æ˜¯ä¸€åº§â€œç™¾å¹´æ°´åŠ›é’Ÿâ€ï¼é©¬é¦–ä½œä¸ºæµ·æ™å ‚åäºŒç”Ÿè‚–æ°´åŠ›é’Ÿçš„æ ¸å¿ƒï¼Œä¸“é—¨å¯¹åº”åˆæ—¶ï¼ˆ11:00-13:00ï¼‰å–·æ°´ï¼Œä¸­è¥¿åˆç’§çš„æ°´åˆ©ä¸è®¡æ—¶æ™ºæ…§ï¼Œåœ¨å®ƒèº«ä¸Šä½“ç°å¾—æ·‹æ¼“å°½è‡´ã€‚
It is not just a cultural relic, but a century-old water clock!
As the centerpiece of the Twelve Chinese Zodiac Water Clock at the Haiyan Hall, the Horse Head spouts water specifically at the Wu hour (11:00â€“13:00).
The wisdom of water conservancy and timekeeping, a perfect fusion of Chinese and Western ingenuity, is vividly embodied in it.`;
if(part==='mane') text=`è¿™ç»„çµåŠ¨çš„å·æ›²é¬ƒæ¯›ï¼Œç«Ÿå‡ºè‡ªéƒä¸–å®ä¹‹æ‰‹ï¼å®ƒå°†è¥¿æ´‹é›•å¡‘çš„å†™å®ç»†è…»ï¼Œä¸ä¸­å›½é’é“œå·¥è‰ºçš„åšé‡å…¸é›…å®Œç¾èåˆï¼Œæ¯ä¸€ç¼•çº¹è·¯éƒ½è—ç€æ¸…ä»£å®«å»·é€ åŠå¤„çš„å·…å³°æŠ€è‰ºï¼Œå†ç»ç™¾å¹´ä¾æ—§çµåŠ¨é²œæ´»ã€‚
These lively, curling manes are actually the work of Giuseppe Castiglione! They perfectly blend the realistic delicacy of Western sculpture with the solemn elegance of Chinese bronze craftsmanship. 
Every strand and pattern bears the supreme skill of the Qing court workshops, remaining vivid and vibrant even after a hundred years.`;
if(part==='ear') text=`ä»”ç»†çœ‹ï¼è¿™å¤„æ®‹ç¼ºçš„å³è€³ï¼Œè—ç€ä¸€æ®µåˆ»éª¨é“­å¿ƒçš„å†å²â€”â€”1860å¹´è‹±æ³•è”å†›åŠ«æ åœ†æ˜å›­æ—¶ï¼Œå®ƒè¢«æš´åŠ›æŸæ¯ï¼Œæˆä¸ºæ–‡ç‰©ç™¾å¹´æµç¦»çš„â€œæ— å£°è§è¯è€…â€ã€‚ä»Šå¤©ï¼Œå°±è®©æˆ‘ä»¬ç”¨æ•°å­—æŠ€æœ¯ï¼Œä¸ºå®ƒè¡¥ä¸Šè¿™é“è·¨è¶Šç™¾å¹´çš„â€œä¼¤ç—•â€ã€‚ 
Look closely! This damaged right ear holds a deeply unforgettable history.
In 1860, during the looting of the Old Summer Palace by Anglo-French forces, it was violently destroyed, becoming a silent witness to the relicâ€™s century of displacement.
Today, let us use digital technology to mend this century-old scar.`;
if(part==='material') text=`çœ‹ä¼¼æœ´ç´ çš„é©¬é¦–ï¼Œè—ç€ä¸ç®€å•çš„æè´¨å¯†ç â€”â€”å®ƒç”±98%é«˜çº¯åº¦çº¢é“œæ‰“é€ ï¼Œæ­é…å¾®é‡é“…ã€é“ã€é”Œï¼Œä¸ä¹¾éš†å†…åŠ¡åºœæ¡£æ¡ˆè®°è½½çš„é…æ–¹åˆ†æ¯«ä¸å·®ï¼Œä¹Ÿæ­£å› å¦‚æ­¤ï¼Œå®ƒæ‰èƒ½å†ç»ç™¾å¹´é£é›¨ï¼Œä¾æ—§å®Œå¥½ç•™å­˜ã€‚
The seemingly simple Horse Head hides an extraordinary material secret.
Forged from 98% high-purity copper, with trace amounts of lead, iron, and zinc, its composition matches exactly the formula recorded in the archives of the Qianlong Imperial Household Department.
This is precisely why it has survived centuries of wind and rain and remained intact to this day.`; 
}else if(currentModel==='tiger'){
text=`è™å¯¹åº”å¯…æ—¶ï¼ˆ3:00â€”5:00ï¼‰ï¼Œæ˜¯é»æ˜å°†è‡³ã€ä¸‡ç‰©è‹é†’ä¹‹æ—¶ã€‚è™é¦–æ¯åˆ°å¯…æ—¶è‡ªåŠ¨å–·æ°´ï¼Œæ­£åˆä¸åä¸€å…½é¦–é½å–·ï¼Œæ˜¯å¤äººæŠŠç”Ÿè‚–æ–‡åŒ–ã€è®¡æ—¶æ–‡åŒ–ã€æ°´åˆ©ç§‘æŠ€åˆä¸ºä¸€ä½“çš„ç»å¦™è®¾è®¡ã€‚
The Tiger corresponds to the Yin hour (3:00â€“5:00), the time when dawn approaches and all living things stir.
The Tiger Head automatically spouts water at every Yin hour, and at noon, it sprays in unison with the other eleven animal heads.
This is an ingenious design by the ancient Chinese that integrates zodiac culture, timekeeping culture, and water conservancy technology.`;
if(part==='forehead') text=`è™é¦–é¢å¤´ç‰¹æ„é“¸æœ‰æ¸…æ™°çš„ â€œç‹â€ å­—çº¹è·¯ ï¼Œè¿™æ˜¯ä¸­å›½æ–‡åŒ–ç‹¬æœ‰çš„è‰ºæœ¯è¡¨è¾¾ â€”â€” è™ä¸ºç™¾å…½ä¹‹ç‹ï¼Œâ€œç‹â€ å­—æ—¢æ˜¯è™çš„æ ‡å¿—ï¼Œä¹Ÿè±¡å¾å¨ä¸¥ã€æ­£æ°”ä¸å®ˆæŠ¤ï¼Œæ˜¯ä¸­å¼å›¾è…¾ä¸è¥¿æ–¹é›•å¡‘å®Œç¾èåˆçš„å·§æ€ã€‚
The forehead of the Tiger Head is specially cast with a distinct Chinese character "ç‹" (wÃ¡ng, meaning "king") patternâ€”a unique artistic expression in Chinese culture.
As the king of all beasts, the tiger bears the character "ç‹" as its symbol. It represents dignity, righteousness, and protection, embodying the ingenious fusion of Chinese totem art and Western sculpture.`; 
if(part==='eyes') text=`è™é¦–åŒç›®åœ†çã€ç›®å…‰é”åˆ©æœ‰ç¥ï¼Œä¸æ€’è‡ªå¨ã€‚åœ¨ä¸­å›½æ–‡åŒ–é‡Œï¼Œè™çœ¼è±¡å¾å‹‡æ°”ã€é•‡å®…ã€è¾Ÿé‚ªï¼ŒåŒ å¸ˆç”¨æç®€çº¿æ¡ï¼Œå°±æŠŠçŒ›è™çš„ç²¾æ°”ç¥å®Œç¾å®šæ ¼ã€‚
The Tiger Head has wide-open, sharp and vivid eyes, exuding awe without anger.
In Chinese culture, tiger eyes symbolize courage, home protection, and warding off evil spirits.
With minimal lines, the craftsmen perfectly captured the spirit and vitality of the fierce tiger.`; 
if(part==='nose') text=`è™é¦–é¼»æ¢æŒºæ‹¬ã€é¢éƒ¨è‚Œè‚‰é¥±æ»¡æœ‰åŠ›ï¼Œæ—¢éµå¾ªè¥¿æ–¹è§£å‰–å­¦çš„çœŸå®ç»“æ„ï¼Œåˆç¬¦åˆä¸œæ–¹å®¡ç¾é‡Œçš„é›„æµ‘å¤§æ°”ï¼Œæ¯ä¸€å¤„èµ·ä¼éƒ½ä½“ç°æ¸…ä»£å®«å»·é€ åŠå¤„çš„é¡¶çº§æ°´å‡†ã€‚
The Tiger Head features a straight, prominent nose bridge and full, powerful facial muscles.
It follows the realistic anatomical structure of Western sculpture while conforming to the grand, robust aesthetic of the East.
Every contour and curve demonstrates the top craftsmanship of the Qing Dynasty Imperial Workshop.`; 
}
intro.textContent=text;
intro.classList.add('show');

// å¦‚æœæœ—è¯»å¼€å¯ï¼Œæœ—è¯»å½“å‰è¯­è¨€æ–‡æœ¬
if(speakOn){
speakText(currentLang==='zh'?text.split('\n')[0]:text.split('\n')[3]);
}
}

// éŸ³ä¹å’Œæœ—è¯»æ§åˆ¶
const bgm=document.getElementById("bgm");
const musicBtn=document.getElementById("musicBtn");
musicBtn.onclick=function(){
speakOn=!speakOn;
if(speakOn){ bgm.play(); musicBtn.innerText="ğŸ”Š"; showIntroduction(); }
else{ bgm.pause(); musicBtn.innerText="ğŸµ"; speechSynthesis.cancel(); }
}

// è¯­éŸ³æœ—è¯»å‡½æ•°
function speakText(text){
const utter=new SpeechSynthesisUtterance(text);
utter.lang=currentLang==='zh'?'zh-CN':'en-US';
speechSynthesis.cancel();
speechSynthesis.speak(utter);
}

// å±€éƒ¨é«˜äº®
function highlightPart(partName){
if(!model) return;
model.traverse(obj=>{if(obj.isMesh && originalMaterials.has(obj.name)){obj.material = originalMaterials.get(obj.name);}});
const highlightMeshes=[];
model.traverse(obj=>{
if(obj.isMesh && obj.name.toLowerCase().includes(partName)){
if(!originalMaterials.has(obj.name)) originalMaterials.set(obj.material);
obj.material = obj.material.clone();
highlightMeshes.push(obj.material);
}
});
if(highlightMeshes.length===0) return;
let intensity=0; let increasing=true;
function animateHighlight(){
highlightMeshes.forEach(mat=>{mat.emissive = new THREE.Color(0x00ffff); mat.emissiveIntensity=intensity;});
if(increasing){intensity+=0.02;if(intensity>=0.8) increasing=false;}
else{intensity-=0.02;if(intensity<=0.2){highlightMeshes.forEach(mat=>mat.emissiveIntensity=0.5);return;}}
requestAnimationFrame(animateHighlight);
}
animateHighlight();
}

// ç²’å­èƒŒæ™¯
const techCanvas=document.getElementById("techCanvas");
const ctx=techCanvas.getContext("2d");
techCanvas.width=window.innerWidth; techCanvas.height=window.innerHeight;
let particles=[];
for(let i=0;i<120;i++){particles.push({x:Math.random()*techCanvas.width,y:Math.random()*techCanvas.height,r:Math.random()*2,dx:(Math.random()-0.5)*0.5,dy:(Math.random()-0.5)*0.5});}
function animateParticles(){
ctx.clearRect(0,0,techCanvas.width,techCanvas.height);
ctx.fillStyle="#00ffff";
particles.forEach(p=>{p.x+=p.dx;p.y+=p.dy;if(p.x<0||p.x>techCanvas.width)p.dx*=-1;if(p.y<0||p.y>techCanvas.height)p.dy*=-1;ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();});
requestAnimationFrame(animateParticles);
}
animateParticles();

// ç¯å…‰åˆ‡æ¢
let cyberMode=true;
document.getElementById("lightBtn").onclick=function(){cyberMode=!cyberMode; scene.background=new THREE.Color(cyberMode?0x000000:0x222244);}

// å±å¹•å°ºå¯¸ç›‘å¬
window.addEventListener("resize",()=>{
  techCanvas.width=window.innerWidth;
  techCanvas.height=window.innerHeight;
  if(renderer && camera){
    const container=document.querySelector('.model-container');
    camera.aspect=container.clientWidth/container.clientHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(container.clientWidth,container.clientHeight);
  }
});
</script>
</body>
</html>


