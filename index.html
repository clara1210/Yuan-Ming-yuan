<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>åœ†æ˜å›­æ„ä»¶3Då±•ç¤º</title>
    
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family: Arial, sans-serif;background:#000;color:#fff;overflow-x:hidden;}
button{cursor:pointer;}
#techCanvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;}
#hudPanel{position:fixed;left:20px;bottom:20px;background:rgba(0,255,255,0.1);border:1px solid #00ffff;padding:15px;border-radius:10px;font-size:13px;backdrop-filter:blur(5px);}
#musicBtn,#lightBtn{position:fixed;right:20px;padding:8px 12px;border:none;border-radius:6px;background:#00ffff;color:#000;z-index:9999;font-weight:bold;}
#musicBtn{bottom:20px;}#lightBtn{bottom:60px;}
#scanLine{position:fixed;top:0;left:0;width:100%;height:4px;background:linear-gradient(to right,transparent,#00ffff,transparent);animation:scan 3s linear infinite;}
@keyframes scan{0%{top:0;}100%{top:100%;}}
#langBtn{position:fixed;top:20px;right:20px;padding:8px 14px;border:none;border-radius:6px;background:#333;color:#fff;font-size:14px;z-index:9999;}
#selectPage{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:30px;}
.select-btn{width:200px;height:200px;border:none;border-radius:12px;background-size:cover;background-position:center;}
#viewerPage{display:none;min-height:100vh;flex-direction:column;align-items:center;padding:20px;position:relative;}
#backBtn{position:fixed;top:calc(20px + env(safe-area-inset-top));left:20px;padding:10px 20px;font-size:16px;border:none;border-radius:6px;background:#b8860b;color:#fff;font-weight:bold;z-index:9999;}
.model-container{width:100%;max-width:900px;height:75vh;border-radius:15px;overflow:hidden;position:relative;margin-bottom:20px;box-shadow:0 20px 40px rgba(0,0,0,0.2);}
#modelCanvas{width:100%;height:100%;display:block;}
.introduction{width:100%;max-width:900px;padding:30px;text-align:center;font-size:16px;font-weight:bold;background:rgba(255,255,255,0.95);border-radius:15px;line-height:1.7;white-space:pre-line;opacity:0;transition:opacity 0.6s ease;color:#333}
.introduction.show{opacity:1;}
.controls,.part-buttons{margin-top:20px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap;}
.control-btn,.part-btn{padding:8px 16px;border-radius:4px;cursor:pointer;}
.control-btn{border:none;background:#ffffff;}
.part-btn{background:#b8860b;border:none;color:#fff;font-weight:bold;}
</style>
</head>
<body>

<canvas id="techCanvas"></canvas>
<div id="scanLine"></div>

<audio id="bgm" loop>
<source src="https://cdn.pixabay.com/audio/2022/03/15/audio_7c1b5b1c8b.mp3" type="audio/mpeg">
</audio>

<button id="musicBtn">ğŸµ</button>
<button id="lightBtn">ğŸ’¡</button>

<button id="langBtn" onclick="toggleLanguage()">ä¸­æ–‡</button>

<div id="selectPage">
<button class="select-btn" id="horseBtn" onclick="startViewer('horse')" style="background-image:url('horsepicture.jpg')"></button>
<button class="select-btn" id="tigerBtn" onclick="startViewer('tiger')" style="background-image:url('tigerpicture.jpg')"></button>
</div>

<div id="viewerPage">
<button id="backBtn" onclick="returnToSelect()">è¿”å›é€‰æ‹©</button>

<div class="model-container">
<div id="loading">åŠ è½½ä¸­...</div>
<canvas id="modelCanvas"></canvas>
</div>

<div class="introduction" id="introText"></div>

<div class="controls">
<button class="control-btn" id="resetBtn" onclick="resetCamera()">é‡ç½®è§†è§’</button>
<button class="control-btn" id="zoomInBtn" onclick="zoomIn()">æ”¾å¤§</button>
<button class="control-btn" id="zoomOutBtn" onclick="zoomOut()">ç¼©å°</button>
</div>

<div class="part-buttons" id="partButtons"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>

<script>
let currentLang='zh';
let scene, camera, renderer, controls, model;
let autoRotate=true;
let currentModel='';
let modelScale=1;
const originalMaterials = new Map();
let speakOn=false;

// å¤šè¯­è¨€æ–‡å­—æ•°æ®
const introTextData = {
  horse: {
    default: {
      zh:`å®ƒä¸åªæ˜¯ä¸€ä»¶æ–‡ç‰©ï¼Œæ›´æ˜¯ä¸€åº§â€œç™¾å¹´æ°´åŠ›é’Ÿâ€ï¼é©¬é¦–ä½œä¸ºæµ·æ™å ‚åäºŒç”Ÿè‚–æ°´åŠ›é’Ÿçš„æ ¸å¿ƒï¼Œä¸“é—¨å¯¹åº”åˆæ—¶ï¼ˆ11:00-13:00ï¼‰å–·æ°´ï¼Œä¸­è¥¿åˆç’§çš„æ°´åˆ©ä¸è®¡æ—¶æ™ºæ…§ï¼Œåœ¨å®ƒèº«ä¸Šä½“ç°å¾—æ·‹æ¼“å°½è‡´ã€‚`,
      en:`It is not just a cultural relic, but a century-old water clock! The Horse Head is the centerpiece of the Twelve Zodiac Water Clock at Haiyan Hall, designed to spout water at the Wu hour (11:00â€“13:00), embodying a perfect fusion of Chinese and Western water and timekeeping wisdom.`
    },
    mane: {
      zh:`è¿™ç»„çµåŠ¨çš„å·æ›²é¬ƒæ¯›ï¼Œç«Ÿå‡ºè‡ªéƒä¸–å®ä¹‹æ‰‹ï¼å®ƒå°†è¥¿æ´‹é›•å¡‘çš„å†™å®ç»†è…»ï¼Œä¸ä¸­å›½é’é“œå·¥è‰ºçš„åšé‡å…¸é›…å®Œç¾èåˆï¼Œæ¯ä¸€ç¼•çº¹è·¯éƒ½è—ç€æ¸…ä»£å®«å»·é€ åŠå¤„çš„å·…å³°æŠ€è‰ºï¼Œå†ç»ç™¾å¹´ä¾æ—§çµåŠ¨é²œæ´»ã€‚`,
      en:`These lively curling manes are the work of Giuseppe Castiglione! They perfectly blend the realism of Western sculpture with the solemn elegance of Chinese bronze craftsmanship. Each strand bears the supreme skill of the Qing court and remains vivid after a hundred years.`
    },
    ear: {
      zh:`ä»”ç»†çœ‹ï¼è¿™å¤„æ®‹ç¼ºçš„å³è€³ï¼Œè—ç€ä¸€æ®µåˆ»éª¨é“­å¿ƒçš„å†å²â€”â€”1860å¹´è‹±æ³•è”å†›åŠ«æ åœ†æ˜å›­æ—¶ï¼Œå®ƒè¢«æš´åŠ›æŸæ¯ï¼Œæˆä¸ºæ–‡ç‰©ç™¾å¹´æµç¦»çš„â€œæ— å£°è§è¯è€…â€ã€‚ä»Šå¤©ï¼Œå°±è®©æˆ‘ä»¬ç”¨æ•°å­—æŠ€æœ¯ï¼Œä¸ºå®ƒè¡¥ä¸Šè¿™é“è·¨è¶Šç™¾å¹´çš„â€œä¼¤ç—•â€ã€‚`,
      en:`Look closely! This damaged right ear holds a deeply unforgettable history. In 1860, during the looting of the Old Summer Palace by Anglo-French forces, it was violently destroyed, becoming a silent witness to the relicâ€™s century-long displacement. Today, digital technology helps us mend this century-old scar.`
    },
    material: {
      zh:`çœ‹ä¼¼æœ´ç´ çš„é©¬é¦–ï¼Œè—ç€ä¸ç®€å•çš„æè´¨å¯†ç â€”â€”å®ƒç”±98%é«˜çº¯åº¦çº¢é“œæ‰“é€ ï¼Œæ­é…å¾®é‡é“…ã€é“ã€é”Œï¼Œä¸ä¹¾éš†å†…åŠ¡åºœæ¡£æ¡ˆè®°è½½çš„é…æ–¹åˆ†æ¯«ä¸å·®ï¼Œä¹Ÿæ­£å› å¦‚æ­¤ï¼Œå®ƒæ‰èƒ½å†ç»ç™¾å¹´é£é›¨ï¼Œä¾æ—§å®Œå¥½ç•™å­˜ã€‚`,
      en:`The seemingly simple Horse Head hides extraordinary material secretsâ€”it is made of 98% high-purity copper with traces of lead, iron, and zinc, matching the Qianlong Imperial archives exactly. This is why it has survived centuries intact.`
    }
  },
  tiger: {
    default: {
      zh:`è™å¯¹åº”å¯…æ—¶ï¼ˆ3:00â€”5:00ï¼‰ï¼Œæ˜¯é»æ˜å°†è‡³ã€ä¸‡ç‰©è‹é†’ä¹‹æ—¶ã€‚è™é¦–æ¯åˆ°å¯…æ—¶è‡ªåŠ¨å–·æ°´ï¼Œæ­£åˆä¸åä¸€å…½é¦–é½å–·ï¼Œæ˜¯å¤äººæŠŠç”Ÿè‚–æ–‡åŒ–ã€è®¡æ—¶æ–‡åŒ–ã€æ°´åˆ©ç§‘æŠ€åˆä¸ºä¸€ä½“çš„ç»å¦™è®¾è®¡ã€‚`,
      en:`The Tiger corresponds to the Yin hour (3:00â€“5:00), when dawn comes and all things stir. The Tiger Head automatically sprays water at every Yin hour and at noon in unison with the other eleven animal heads, integrating zodiac culture, timekeeping, and hydraulic technology.`
    },
    forehead: {
      zh:`è™é¦–é¢å¤´ç‰¹æ„é“¸æœ‰æ¸…æ™°çš„ â€œç‹â€ å­—çº¹è·¯ ï¼Œè¿™æ˜¯ä¸­å›½æ–‡åŒ–ç‹¬æœ‰çš„è‰ºæœ¯è¡¨è¾¾ â€”â€” è™ä¸ºç™¾å…½ä¹‹ç‹ï¼Œâ€œç‹â€ å­—æ—¢æ˜¯è™çš„æ ‡å¿—ï¼Œä¹Ÿè±¡å¾å¨ä¸¥ã€æ­£æ°”ä¸å®ˆæŠ¤ï¼Œæ˜¯ä¸­å¼å›¾è…¾ä¸è¥¿æ–¹é›•å¡‘å®Œç¾èåˆçš„å·§æ€ã€‚`,
      en:`The forehead of the Tiger Head is cast with the Chinese character "ç‹" (king), a unique artistic expression. The tiger, king of beasts, uses this symbol to convey dignity, protection, and a perfect fusion of Chinese totem and Western sculpture.`
    },
    eyes: {
      zh:`è™é¦–åŒç›®åœ†çã€ç›®å…‰é”åˆ©æœ‰ç¥ï¼Œä¸æ€’è‡ªå¨ã€‚åœ¨ä¸­å›½æ–‡åŒ–é‡Œï¼Œè™çœ¼è±¡å¾å‹‡æ°”ã€é•‡å®…ã€è¾Ÿé‚ªï¼ŒåŒ å¸ˆç”¨æç®€çº¿æ¡ï¼Œå°±æŠŠçŒ›è™çš„ç²¾æ°”ç¥å®Œç¾å®šæ ¼ã€‚`,
      en:`The Tiger Headâ€™s eyes are wide and sharp, exuding awe without anger. In Chinese culture, tiger eyes symbolize courage and warding off evil. Craftsmen captured the fierce tigerâ€™s spirit with minimal lines.`
    },
    nose: {
      zh:`è™é¦–é¼»æ¢æŒºæ‹¬ã€é¢éƒ¨è‚Œè‚‰é¥±æ»¡æœ‰åŠ›ï¼Œæ—¢éµå¾ªè¥¿æ–¹è§£å‰–å­¦çš„çœŸå®ç»“æ„ï¼Œåˆç¬¦åˆä¸œæ–¹å®¡ç¾é‡Œçš„é›„æµ‘å¤§æ°”ï¼Œæ¯ä¸€å¤„èµ·ä¼éƒ½ä½“ç°æ¸…ä»£å®«å»·é€ åŠå¤„çš„é¡¶çº§æ°´å‡†ã€‚`,
      en:`The Tiger Headâ€™s nose bridge is straight and facial muscles are full and powerful, following Western anatomical realism and Eastern aesthetic grandeur, reflecting Qing Imperial Workshop craftsmanship.`
    }
  }
};

function showIntroduction(part='default'){
  const intro = document.getElementById('introText');
  intro.classList.remove('show');
  let text = '';
  if(currentModel && introTextData[currentModel] && introTextData[currentModel][part]){
    text = currentLang==='zh'? introTextData[currentModel][part].zh : introTextData[currentModel][part].en;
  }
  intro.textContent = text;
  intro.classList.add('show');
  if(speakOn) speakText(text);
}

// åˆ‡æ¢è¯­è¨€
function toggleLanguage(){
  currentLang=currentLang==='zh'?'en':'zh';
  document.getElementById('langBtn').innerText=currentLang==='zh'?'ä¸­æ–‡':'English';
  updateStaticText();
  setupPartButtons();
  showIntroduction(); // åˆ·æ–°æ–‡å­—ä»‹ç»
}

function updateStaticText(){
  document.getElementById('backBtn').innerText=currentLang==='zh'?'è¿”å›é€‰æ‹©':'Back';
  document.getElementById('resetBtn').innerText=currentLang==='zh'?'é‡ç½®è§†è§’':'Reset View';
  document.getElementById('zoomInBtn').innerText=currentLang==='zh'?'æ”¾å¤§':'Zoom In';
  document.getElementById('zoomOutBtn').innerText=currentLang==='zh'?'ç¼©å°':'Zoom Out';
  document.getElementById('loading').innerText=currentLang==='zh'?'åŠ è½½ä¸­...':'Loading...';
}

// éŸ³ä¹ä¸æœ—è¯»
const bgm=document.getElementById("bgm");
const musicBtn=document.getElementById("musicBtn");
musicBtn.onclick=function(){
  speakOn = !speakOn;
  if(speakOn){ bgm.play(); musicBtn.innerText="ğŸ”Š"; showIntroduction(); }
  else{ bgm.pause(); musicBtn.innerText="ğŸµ"; speechSynthesis.cancel(); }
}

function speakText(text){
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = currentLang==='zh'?'zh-CN':'en-US';
  speechSynthesis.cancel();
  speechSynthesis.speak(utter);
}
</script>
</body>
</html>
