<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>åœ†æ˜å›­æ„ä»¶3Då±•ç¤º</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:Arial,sans-serif;background:#000;color:#fff;overflow-x:hidden;}
button{cursor:pointer;}

#techCanvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;}

#musicBtn,#lightBtn,#langBtn{
position:fixed;
right:20px;
padding:8px 12px;
border:none;
border-radius:6px;
background:#00ffff;
color:#000;
z-index:9999;
font-weight:bold;
}
#musicBtn{bottom:20px;}
#lightBtn{bottom:60px;}
#langBtn{top:20px;background:#333;color:#fff;}

#scanLine{
position:fixed;top:0;left:0;width:100%;height:4px;
background:linear-gradient(to right,transparent,#00ffff,transparent);
animation:scan 3s linear infinite;
}
@keyframes scan{0%{top:0;}100%{top:100%;}}

#selectPage{
min-height:100vh;display:flex;flex-direction:column;
align-items:center;justify-content:center;gap:30px;
}

.select-btn{
width:200px;height:200px;border:none;border-radius:12px;
background-size:cover;background-position:center;
}

#viewerPage{
display:none;min-height:100vh;flex-direction:column;
align-items:center;padding:20px;position:relative;
}

#backBtn{
position:fixed;top:20px;left:20px;padding:10px 20px;
font-size:16px;border:none;border-radius:6px;
background:#b8860b;color:#fff;font-weight:bold;z-index:9999;
}

.model-container{
width:100%;max-width:900px;height:75vh;border-radius:15px;
overflow:hidden;position:relative;margin-bottom:20px;
box-shadow:0 20px 40px rgba(0,0,0,0.2);
}

#modelCanvas{width:100%;height:100%;display:block;}

.introduction{
width:100%;max-width:900px;padding:30px;text-align:center;
font-size:16px;font-weight:bold;background:rgba(255,255,255,0.95);
border-radius:15px;line-height:1.7;white-space:pre-line;
opacity:0;transition:opacity 0.6s ease;color:#333;
}
.introduction.show{opacity:1;}

.controls,.part-buttons{
margin-top:20px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap;
}

.control-btn,.part-btn{padding:8px 16px;border-radius:4px;cursor:pointer;}
.control-btn{border:none;background:#ffffff;}
.part-btn{background:#b8860b;border:none;color:#fff;font-weight:bold;}
</style>
</head>
<body>

<canvas id="techCanvas"></canvas>
<div id="scanLine"></div>

<audio id="bgm" loop>
<source src="https://cdn.pixabay.com/audio/2022/03/15/audio_7c1b5b1c8b.mp3" type="audio/mpeg">
</audio>

<button id="musicBtn">ğŸµ</button>
<button id="lightBtn">ğŸ’¡</button>
<button id="langBtn" onclick="toggleLanguage()">ä¸­æ–‡</button>

<div id="selectPage">
<button class="select-btn" onclick="startViewer('horse')" style="background-image:url('horsepicture.jpg')"></button>
<button class="select-btn" onclick="startViewer('tiger')" style="background-image:url('tigerpicture.jpg')"></button>
</div>

<div id="viewerPage">
<button id="backBtn" onclick="returnToSelect()">è¿”å›é€‰æ‹©</button>

<div class="model-container">
<div id="loading">åŠ è½½ä¸­...</div>
<canvas id="modelCanvas"></canvas>
</div>

<div class="introduction" id="introText"></div>

<div class="controls">
<button class="control-btn" id="resetBtn" onclick="resetCamera()">é‡ç½®è§†è§’</button>
<button class="control-btn" id="zoomInBtn" onclick="zoomIn()">æ”¾å¤§</button>
<button class="control-btn" id="zoomOutBtn" onclick="zoomOut()">ç¼©å°</button>
</div>

<div class="part-buttons" id="partButtons"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>

<script>
let currentLang='zh';
let scene,camera,renderer,controls,model;
let currentModel='';
let modelScale=1;
let speakOn=false;

/* ================= è¯­è¨€åˆ‡æ¢ ================= */
function toggleLanguage(){
currentLang=currentLang==='zh'?'en':'zh';
document.getElementById('langBtn').innerText=currentLang==='zh'?'ä¸­æ–‡':'English';
updateStaticText();
setupPartButtons();
showIntroduction();
}

function updateStaticText(){
document.getElementById('backBtn').innerText=currentLang==='zh'?'è¿”å›é€‰æ‹©':'Back';
document.getElementById('resetBtn').innerText=currentLang==='zh'?'é‡ç½®è§†è§’':'Reset View';
document.getElementById('zoomInBtn').innerText=currentLang==='zh'?'æ”¾å¤§':'Zoom In';
document.getElementById('zoomOutBtn').innerText=currentLang==='zh'?'ç¼©å°':'Zoom Out';
document.getElementById('loading').innerText=currentLang==='zh'?'åŠ è½½ä¸­...':'Loading...';
}

/* ================= é¡µé¢åˆ‡æ¢ ================= */
function startViewer(type){
currentModel=type;
document.getElementById('selectPage').style.display='none';
document.getElementById('viewerPage').style.display='flex';
setupPartButtons();
init();
animate();
showIntroduction();
}

function returnToSelect(){
document.getElementById('viewerPage').style.display='none';
document.getElementById('selectPage').style.display='flex';
if(model) scene.remove(model);
model=null;
}

/* ================= éƒ¨ä»¶æŒ‰é’® ================= */
function setupPartButtons(){
const c=document.getElementById('partButtons');
if(currentModel==='horse'){
c.innerHTML=currentLang==='zh'?`
<button class="part-btn" onclick="showIntroduction('mane')">é¬“æ¯›</button>
<button class="part-btn" onclick="showIntroduction('ear')">è€³æœµ</button>
<button class="part-btn" onclick="showIntroduction('material')">æè´¨</button>
<button class="part-btn" onclick="loadOldModel()">ä¿®å¤å‰çš„é©¬é¦–</button>
<button class="part-btn" onclick="loadNewModel()">ä¿®å¤åçš„é©¬é¦–</button>`
:`
<button class="part-btn" onclick="showIntroduction('mane')">Mane</button>
<button class="part-btn" onclick="showIntroduction('ear')">Ear</button>
<button class="part-btn" onclick="showIntroduction('material')">Material</button>
<button class="part-btn" onclick="loadOldModel()">Before Restoration</button>
<button class="part-btn" onclick="loadNewModel()">After Restoration</button>`;
modelScale=1;
}else{
c.innerHTML=currentLang==='zh'?`
<button class="part-btn" onclick="showIntroduction('forehead')">å‰é¢</button>
<button class="part-btn" onclick="showIntroduction('eyes')">çœ¼éƒ¨ç¥æ€</button>
<button class="part-btn" onclick="showIntroduction('nose')">é¼»éƒ¨ä¸é¢éƒ¨è‚Œè‚‰</button>
<button class="part-btn" onclick="loadOldModel()">ä¿®å¤å‰çš„è™é¦–</button>
<button class="part-btn" onclick="loadNewModel()">ä¿®å¤åçš„è™é¦–</button>`
:`
<button class="part-btn" onclick="showIntroduction('forehead')">Forehead</button>
<button class="part-btn" onclick="showIntroduction('eyes')">Eyes</button>
<button class="part-btn" onclick="showIntroduction('nose')">Nose & Muscles</button>
<button class="part-btn" onclick="loadOldModel()">Before Restoration</button>
<button class="part-btn" onclick="loadNewModel()">After Restoration</button>`;
modelScale=2;
}
}

/* ================= THREE ================= */
function init(){
scene=new THREE.Scene();
scene.background=new THREE.Color(0x000000);
const canvas=document.getElementById('modelCanvas');
camera=new THREE.PerspectiveCamera(45,canvas.clientWidth/canvas.clientHeight,0.1,1000);
camera.position.set(0,2,6);
renderer=new THREE.WebGLRenderer({canvas:canvas,antialias:true});
renderer.setSize(canvas.clientWidth,canvas.clientHeight);
controls=new THREE.OrbitControls(camera,renderer.domElement);
controls.enableDamping=true;
scene.add(new THREE.HemisphereLight(0xffffff,0x444444,1.2));
const dir=new THREE.DirectionalLight(0xffffff,1);
dir.position.set(5,10,7);
scene.add(dir);
window.addEventListener('resize',onWindowResize);
loadNewModel();
}

function loadModel(url){
const loader=new THREE.GLTFLoader();
document.getElementById('loading').style.display="block";
loader.load(url,function(gltf){
if(model) scene.remove(model);
model=gltf.scene;
model.scale.setScalar(modelScale);
scene.add(model);
document.getElementById('loading').style.display="none";
});
}

function loadOldModel(){
if(currentModel==='horse') loadModel('horse.glb');
else loadModel('tiger.glb');
}
function loadNewModel(){
if(currentModel==='horse') loadModel('horse model.glb');
else loadModel('tiger model.glb');
}

function animate(){
requestAnimationFrame(animate);
if(controls) controls.update();
if(renderer) renderer.render(scene,camera);
}

function onWindowResize(){
const canvas=document.getElementById('modelCanvas');
camera.aspect=canvas.clientWidth/canvas.clientHeight;
camera.updateProjectionMatrix();
renderer.setSize(canvas.clientWidth,canvas.clientHeight);
}

function resetCamera(){if(controls) controls.reset();}
function zoomIn(){camera.position.multiplyScalar(0.9);}
function zoomOut(){camera.position.multiplyScalar(1.1);}

/* ================= å®Œæ•´ä¿ç•™æ–‡å­— ================= */
function showIntroduction(part){
const intro=document.getElementById('introText');
intro.classList.remove('show');
let text='';

if(currentModel==='horse'){
const content={
default:{
zh:"å®ƒä¸åªæ˜¯ä¸€ä»¶æ–‡ç‰©ï¼Œæ›´æ˜¯ä¸€åº§â€œç™¾å¹´æ°´åŠ›é’Ÿâ€ï¼é©¬é¦–ä½œä¸ºæµ·æ™å ‚åäºŒç”Ÿè‚–æ°´åŠ›é’Ÿçš„æ ¸å¿ƒï¼Œä¸“é—¨å¯¹åº”åˆæ—¶ï¼ˆ11:00-13:00ï¼‰å–·æ°´ï¼Œä¸­è¥¿åˆç’§çš„æ°´åˆ©ä¸è®¡æ—¶æ™ºæ…§ï¼Œåœ¨å®ƒèº«ä¸Šä½“ç°å¾—æ·‹æ¼“å°½è‡´ã€‚",
en:"It is not just an artifact, but a century-old hydraulic clock. The horse head sprays water at noon, blending Chinese and Western timekeeping wisdom."
},
mane:{
zh:"è¿™ç»„çµåŠ¨çš„å·æ›²é¬ƒæ¯›ï¼Œç«Ÿå‡ºè‡ªéƒä¸–å®ä¹‹æ‰‹ï¼å®ƒå°†è¥¿æ´‹é›•å¡‘çš„å†™å®ç»†è…»ï¼Œä¸ä¸­å›½é’é“œå·¥è‰ºçš„åšé‡å…¸é›…å®Œç¾èåˆï¼Œæ¯ä¸€ç¼•çº¹è·¯éƒ½è—ç€æ¸…ä»£å®«å»·é€ åŠå¤„çš„å·…å³°æŠ€è‰ºï¼Œå†ç»ç™¾å¹´ä¾æ—§çµåŠ¨é²œæ´»ã€‚",
en:"The curled mane blends Western realism with Chinese bronze elegance."
},
ear:{
zh:"ä»”ç»†çœ‹ï¼è¿™å¤„æ®‹ç¼ºçš„å³è€³ï¼Œè—ç€ä¸€æ®µåˆ»éª¨é“­å¿ƒçš„å†å²â€”â€”1860å¹´è‹±æ³•è”å†›åŠ«æ åœ†æ˜å›­æ—¶ï¼Œå®ƒè¢«æš´åŠ›æŸæ¯ï¼Œæˆä¸ºæ–‡ç‰©ç™¾å¹´æµç¦»çš„â€œæ— å£°è§è¯è€…â€ã€‚ä»Šå¤©ï¼Œå°±è®©æˆ‘ä»¬ç”¨æ•°å­—æŠ€æœ¯ï¼Œä¸ºå®ƒè¡¥ä¸Šè¿™é“è·¨è¶Šç™¾å¹´çš„â€œä¼¤ç—•â€ã€‚",
en:"The damaged ear reflects the 1860 looting history, now restored digitally."
},
material:{
zh:"çœ‹ä¼¼æœ´ç´ çš„é©¬é¦–ï¼Œè—ç€ä¸ç®€å•çš„æè´¨å¯†ç â€”â€”å®ƒç”±98%é«˜çº¯åº¦çº¢é“œæ‰“é€ ï¼Œæ­é…å¾®é‡é“…ã€é“ã€é”Œï¼Œä¸ä¹¾éš†å†…åŠ¡åºœæ¡£æ¡ˆè®°è½½çš„é…æ–¹åˆ†æ¯«ä¸å·®ï¼Œä¹Ÿæ­£å› å¦‚æ­¤ï¼Œå®ƒæ‰èƒ½å†ç»ç™¾å¹´é£é›¨ï¼Œä¾æ—§å®Œå¥½ç•™å­˜ã€‚",
en:"Made of 98% red copper with trace metals, matching Qing records."
}
};
text=content[part||'default'][currentLang];
}else{
const content={
default:{
zh:"è™å¯¹åº”å¯…æ—¶ï¼ˆ3:00â€”5:00ï¼‰ï¼Œæ˜¯é»æ˜å°†è‡³ã€ä¸‡ç‰©è‹é†’ä¹‹æ—¶ã€‚è™é¦–æ¯åˆ°å¯…æ—¶è‡ªåŠ¨å–·æ°´ï¼Œæ­£åˆä¸åä¸€å…½é¦–é½å–·ï¼Œæ˜¯å¤äººæŠŠç”Ÿè‚–æ–‡åŒ–ã€è®¡æ—¶æ–‡åŒ–ã€æ°´åˆ©ç§‘æŠ€åˆä¸ºä¸€ä½“çš„ç»å¦™è®¾è®¡ã€‚",
en:"The tiger sprays water at dawn, symbolizing awakening."
},
forehead:{
zh:"è™é¦–é¢å¤´ç‰¹æ„é“¸æœ‰æ¸…æ™°çš„ â€œç‹â€ å­—çº¹è·¯ ï¼Œè¿™æ˜¯ä¸­å›½æ–‡åŒ–ç‹¬æœ‰çš„è‰ºæœ¯è¡¨è¾¾ â€”â€” è™ä¸ºç™¾å…½ä¹‹ç‹ï¼Œâ€œç‹â€ å­—æ—¢æ˜¯è™çš„æ ‡å¿—ï¼Œä¹Ÿè±¡å¾å¨ä¸¥ã€æ­£æ°”ä¸å®ˆæŠ¤ï¼Œæ˜¯ä¸­å¼å›¾è…¾ä¸è¥¿æ–¹é›•å¡‘å®Œç¾èåˆçš„å·§æ€ã€‚",
en:"The 'King' symbol on the forehead shows authority and protection."
},
eyes:{
zh:"è™é¦–åŒç›®åœ†çã€ç›®å…‰é”åˆ©æœ‰ç¥ï¼Œä¸æ€’è‡ªå¨ã€‚åœ¨ä¸­å›½æ–‡åŒ–é‡Œï¼Œè™çœ¼è±¡å¾å‹‡æ°”ã€é•‡å®…ã€è¾Ÿé‚ªï¼ŒåŒ å¸ˆç”¨æç®€çº¿æ¡ï¼Œå°±æŠŠçŒ›è™çš„ç²¾æ°”ç¥å®Œç¾å®šæ ¼ã€‚",
en:"Sharp eyes symbolize courage and protection."
},
nose:{
zh:"è™é¦–é¼»æ¢æŒºæ‹¬ã€é¢éƒ¨è‚Œè‚‰é¥±æ»¡æœ‰åŠ›ï¼Œæ—¢éµå¾ªè¥¿æ–¹è§£å‰–å­¦çš„çœŸå®ç»“æ„ï¼Œåˆç¬¦åˆä¸œæ–¹å®¡ç¾é‡Œçš„é›„æµ‘å¤§æ°”ï¼Œæ¯ä¸€å¤„èµ·ä¼éƒ½ä½“ç°æ¸…ä»£å®«å»·é€ åŠå¤„çš„é¡¶çº§æ°´å‡†ã€‚",
en:"Facial muscles combine Western anatomy with Eastern aesthetics."
}
};
text=content[part||'default'][currentLang];
}

intro.textContent=text;
intro.classList.add('show');
}
</script>
</body>
</html>
